!function(N){"use strict";function n(t,r){var o=t.locale||"en-US";this.parse=function(t){var e=new Intl.NumberFormat(o),n=e.format(11111).replace(/1/g,"")||".",e=e.format(1.1).replace(/1/g,"");return parseFloat(t.replace(new RegExp(" ","g"),"").replace(new RegExp("\\"+n,"g"),"").replace(new RegExp("\\"+e),"."))},this.render=function(t){var e=parseInt(r.getAttribute("data-decimals"))||0,n=!("false"===r.getAttribute("data-digit-grouping"));return new Intl.NumberFormat(o,{minimumFractionDigits:e,maximumFractionDigits:e,useGrouping:n}).format(t)}}var k=!1,r=N.fn.val;function S(t,e){t.addEventListener("mousedown",function(t){0===t.button&&(t.preventDefault(),e(t))}),t.addEventListener("touchstart",function(t){t.cancelable&&t.preventDefault(),e(t)}),t.addEventListener("keydown",function(t){32!==t.keyCode&&13!==t.keyCode||k||(k=!0,e(t))})}N.fn.val=function(t){if(1<=arguments.length)for(var e=0;e<this.length;e++)this[e]["bootstrap-input-spinner"]&&this[e].setValue&&this[e].setValue(t);return r.apply(this,arguments)},N.fn.inputSpinner=function(t){if("destroy"===t)this.each(function(){this["bootstrap-input-spinner"]?this.destroyInputSpinner():console.warn("element",this,"is no bootstrap-input-spinner")});else{var e,C={decrementButton:"<strong>&minus;</strong>",incrementButton:"<strong>&plus;</strong>",groupClass:"",buttonsClass:"btn-outline-secondary",buttonsWidth:"2.5rem",textAlign:"center",autoDelay:500,autoInterval:50,buttonsOnly:!1,keyboardStepping:!0,locale:navigator.language,editor:n,template:'<div class="input-group ${groupClass}"><button style="min-width: ${buttonsWidth}" class="btn btn-decrement ${buttonsClass} btn-minus" type="button">${decrementButton}</button><input type="text" inputmode="decimal" style="text-align: ${textAlign}" class="form-control form-control-text-input"/><button style="min-width: ${buttonsWidth}" class="btn btn-increment ${buttonsClass} btn-plus" type="button">${incrementButton}</button></div>'};for(e in t)C[e]=t[e];var $=C.template.replace(/\${groupClass}/g,C.groupClass).replace(/\${buttonsWidth}/g,C.buttonsWidth).replace(/\${buttonsClass}/g,C.buttonsClass).replace(/\${decrementButton}/g,C.decrementButton).replace(/\${incrementButton}/g,C.incrementButton).replace(/\${textAlign}/g,C.textAlign);this.each(function(){var r,e,n,o,i,a,p,u,s,l,d,c,t,f,m,b,g;function h(t,e){void 0===e&&(e=!0),c=isNaN(t)||""===t?(r[0].value="",e&&(p[0].value=""),NaN):(t=parseFloat(t),t=Math.min(Math.max(t,s),l),r[0].value=t,e&&(p[0].value=r[0].inputSpinnerEditor.render(t)),t)}function v(e,n){n&&setTimeout(function(){var t;"function"==typeof Event?t=new Event(n,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(n,!0,!0),e[0].dispatchEvent(t)})}function y(t){w(t),x(),void 0!==C.autoInterval&&(e=setTimeout(function(){n=setInterval(function(){w(t)},C.autoInterval)},C.autoDelay))}function w(t){isNaN(c)&&(c=0),h(Math.round(c/t)*t+t),v(r,"input")}function x(){clearTimeout(e),clearTimeout(n)}function E(){r.prop("required")&&(p.prop("required",r.prop("required")),r.removeAttr("required")),p.prop("placeholder",r.prop("placeholder")),p.attr("inputmode",r.attr("inputmode")||"decimal");var t=r.prop("disabled"),e=r.prop("readonly"),t=(p.prop("disabled",t),p.prop("readonly",e||C.buttonsOnly),a.prop("disabled",t||e),i.prop("disabled",t||e),(t||e)&&x(),r.prop("class")),e="",t=(/form-control-sm/g.test(t)?e="input-group-sm":/form-control-lg/g.test(t)&&(e="input-group-lg"),t.replace(/form-control(-(sm|lg))?/g,""));o.prop("class","input-group "+e+" "+C.groupClass),p.prop("class","form-control "+t),s=isNaN(r.prop("min"))||""===r.prop("min")?-1/0:parseFloat(r.prop("min")),l=isNaN(r.prop("max"))||""===r.prop("max")?1/0:parseFloat(r.prop("max")),d=parseFloat(r.prop("step"))||1,r.attr("hidden")?o.attr("hidden",r.attr("hidden")):o.removeAttr("hidden"),r.attr("id")&&(p.attr("id",r.attr("id")+"_MP_cBdLN29i2"),u[0]&&u.attr("for",p.attr("id")))}this["bootstrap-input-spinner"]?console.warn("element",this,"is already a bootstrap-input-spinner"):((r=N(this))[0]["bootstrap-input-spinner"]=!0,r.hide(),r[0].inputSpinnerEditor=new C.editor(C,this),n=e=null,o=N($),i=o.find(".btn-decrement"),a=o.find(".btn-increment"),p=o.find("input"),(u=N("label[for='"+r.attr("id")+"']"))[0]||(u=r.closest("label")),d=l=s=null,E(),c=parseFloat(r[0].value),t=!1,f=r.attr("data-prefix")||"",b=r.attr("data-suffix")||"",f&&(f=N('<span class="input-group-text">'+f+"</span>"),o.find("input").before(f)),b&&(f=N('<span class="input-group-text">'+b+"</span>"),o.find("input").after(f)),r[0].setValue=function(t){h(t)},r[0].destroyInputSpinner=function(){r.prop("required",p.prop("required")),m.disconnect(),x(),p.off("paste input change focusout"),o.remove(),r.show(),r[0]["bootstrap-input-spinner"]=void 0,u[0]&&u.attr("for",r.attr("id"))},(m=new MutationObserver(function(){E(),h(c,!0)})).observe(r[0],{attributes:!0}),r.after(o),h(c),p.on("paste input change focusout",function(t){var e=p[0].value,n="focusout"===t.type;h(r[0].inputSpinnerEditor.parse(e),n),v(r,t.type),C.keyboardStepping&&n&&x()}).on("keydown",function(t){C.keyboardStepping&&(38===t.which?(t.preventDefault(),i.prop("disabled")||y(d)):40===t.which&&(t.preventDefault(),a.prop("disabled")||y(-d)))}).on("keyup",function(t){!C.keyboardStepping||38!==t.which&&40!==t.which||(t.preventDefault(),x())}),S(i[0],function(){i.prop("disabled")||(t=!0,y(-d))}),S(a[0],function(){a.prop("disabled")||(t=!0,y(d))}),b=document.body,g=function(){!0===t&&(x(),v(r,"change"),t=!1)},b.addEventListener("mouseup",function(t){g(t)}),b.addEventListener("touchend",function(t){g(t)}),b.addEventListener("keyup",function(t){32!==t.keyCode&&13!==t.keyCode||(k=!1,g(t))}))})}return this}}(jQuery);
